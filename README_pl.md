<!-- README_PL.md -->
<div align="right">
<a href="README.md">English</a> | <a href="README_pl.md">Polski</a>
</div>

<a href="https://my.home-assistant.io/redirect/hacs_repository/?owner=Adam7411&repository=visionect_joan&category=integration" target="_blank" rel="noreferrer noopener"><img src="https://my.home-assistant.io/badges/hacs_repository.svg" alt="OtwÃ³rz swojÄ… instancjÄ™ Home Assistant i przejdÅº do repozytorium w HACS." /></a>

# Visionect Joan dla Home Assistant

<img width="1280" height="800" alt="PrzykÅ‚adowy ekran gÅ‚Ã³wny na tablecie Joan 6" src="https://github.com/user-attachments/assets/32214988-dc0e-44ce-af14-2d7f71fb8e6c" />

<p align="center">

<br>

â¬‡ï¸ Visionect Joan 6 â¬‡ï¸
 
<img width="421" height="328" alt="image" src="https://github.com/user-attachments/assets/6fd88078-283a-4363-a801-71250b8211f4" />

***
ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary> 
  <img width="425" height="574" alt="515106368-0cb2af06-6885-4056-9c51-6835f62c06e9" src="https://github.com/user-attachments/assets/6034d4e4-bfd5-45b2-ab4f-d52c2854f8ee" />
  <img width="758" height="1024" alt="joan" src="https://github.com/user-attachments/assets/fd78c164-6691-477e-84e1-e47a1f70a8cc" />
  <img width="758" height="1024" alt="rss" src="https://github.com/user-attachments/assets/f5a1f528-8201-47a0-9f7a-15b435f9152c" />
  <img width="758" height="1024" alt="pog" src="https://github.com/user-attachments/assets/2aca216e-e0d2-454e-b089-ee1eb04e947b" />
  <img width="758" height="1024" alt="pin" src="https://github.com/user-attachments/assets/c765b34f-ed4e-48d7-a59d-ff8ecd67aa7c" />
  <img width="758" height="1024" alt="kalenda" src="https://github.com/user-attachments/assets/a5f3b53e-1b33-414b-8173-3fac794cbd46" />
  <img width="758" height="1024" alt="cam" src="https://github.com/user-attachments/assets/9c087661-69b0-463b-937e-19b2567cab6b" />
  <img width="758" height="1024" alt="qr5, 12_49_37" src="https://github.com/user-attachments/assets/f3c19b37-0dad-4bd9-89ac-271c016d4211" />
  <img width="758" height="1024" alt="graf0_57" src="https://github.com/user-attachments/assets/7819468a-c33b-409f-9845-2256def6a134" />
  <img width="758" height="1024" alt="txt5" src="https://github.com/user-attachments/assets/0d735375-caf9-4e8c-a4c8-6b5008a88f9b" />
  <img width="758" height="1024" alt="pog23" src="https://github.com/user-attachments/assets/6267ae6c-0263-4fb0-8189-c638cc5d685d" />
  <img width="758" height="1024" alt="sta2" src="https://github.com/user-attachments/assets/8e35f996-26a3-4e4f-9951-1938530a9028" />
  <img width="758" height="1024" alt="ener56_34" src="https://github.com/user-attachments/assets/acb78d0e-ca38-451e-8fc2-f64f479d1c78" />
  <img width="758" height="1024" alt="_58_20" src="https://github.com/user-attachments/assets/3bd6d185-33ae-4407-98c5-9b70821c27b9" />
  <img width="758" height="1024" alt="bat0" src="https://github.com/user-attachments/assets/fe7eb843-a6f1-4ef7-a3a4-e006b93c528f" />
  
  
</details>

***

</p>

Integracja `visionect_joan` zmienia energooszczÄ™dny tablet eâ€‘ink **Joan 6** w potÄ™Å¼ne, w peÅ‚ni konfigurowalne centrum informacji dla Twojego inteligentnego domu.

DziÄ™ki rozbudowanym usÅ‚ugom moÅ¼esz tworzyÄ‡ zaawansowane automatyzacje: po powrocie do domu pokaÅ¼ panel energii, po wejÅ›ciu do kuchni wyÅ›wietl listÄ™ zakupÃ³w, przy wykryciu ruchu wyÅ›lij zdjÄ™cie z kamery i automatycznie wrÃ³Ä‡ do gÅ‚Ã³wnego pulpitu.

***

## NajwaÅ¼niejsze funkcje

- PeÅ‚na kontrola ekranu: wyÅ›lij dowolny adres WWW, lokalne panele (np. AppDaemon) lub pojedyncze obrazy.
- Dynamiczne widoki generowane pod eâ€‘ink: pogoda, kalendarz (takÅ¼e siatka miesiÄ™czna), lista zadaÅ„ (Toâ€‘Do/Shopping List), panel energii, panel statusÃ³w encji, wykresy historii sensorÃ³w.
- InteraktywnoÅ›Ä‡: dolny pasek z przyciskiem â€Wsteczâ€ (â†) i dwoma przyciskami akcji (âœ” i â†’), a opcjonalnie â€kliknij gdziekolwiekâ€, aby wykonaÄ‡ akcjÄ™ lub wrÃ³ciÄ‡.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="561" height="705" alt="505983472-c7d2f579-759e-48dd-8046-5b0606f5de9e" src="https://github.com/user-attachments/assets/dd217c23-d402-43a8-acb3-1bf0ea841c74" />

</details>

- Dwa webhooki (akcje): osobne ID dla prawego (â†’) i Å›rodkowego (âœ”) przycisku.
- ZarzÄ…dzanie energiÄ…: usypianie/wybudzanie urzÄ…dzenia, moÅ¼liwoÅ›Ä‡ ustawienia interwaÅ‚u odÅ›wieÅ¼ania sesji.
- PodglÄ…d na Å¼ywo: encja `camera` zwraca aktualny obraz z ekranu.
- Konfiguracja w UI: widoki predefiniowane i adres gÅ‚Ã³wnego menu ustawiasz w opcjach integracji (bez YAML).
  
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="838" height="566" alt="505984606-3d86ce11-44b9-4a65-aa2d-9c4379b77fd3" src="https://github.com/user-attachments/assets/ef9ef69b-413d-4ca4-86d9-373d3117880a" />


</details>


***

## DostÄ™pne encje

- `camera` â€“ PodglÄ…d ekranu na Å¼ywo.
- `sensor`
  - Stan online/offline, bateria, temperatura, RSSI, czas pracy, napiÄ™cie baterii, pamiÄ™Ä‡ (wolna/caÅ‚kowita/uÅ¼yta), â€skonfigurowany URLâ€, ostatnio widziany.
  - Diagnostyka: ostatnia przyczyna poÅ‚Ä…czenia, ostatni kod bÅ‚Ä™du.
  - Orientacja wyÅ›wietlacza (opisowa wartoÅ›Ä‡).
- `binary_sensor`
  - Åadowanie (czy podÅ‚Ä…czona Å‚adowarka).
- `text`
  - Nazwa urzÄ…dzenia (zmiana bezpoÅ›rednio z HA).
- `number`
  - Screen Refresh (`ReloadTimeout`) â€“ jak czÄ™sto sesja odÅ›wieÅ¼a zawartoÅ›Ä‡ (s).
- `select`
  - Choose view â€“ wybÃ³r predefiniowanego widoku dla urzÄ…dzenia.
  - Back button target â€“ domyÅ›lny cel â€Wsteczâ€.
  - Dithering Method â€“ metoda ditheringu (np. none/bayer/floydâ€‘steinberg).
  - Bit Depth â€“ gÅ‚Ä™bia bitowa (zwykle 1 lub 4).
- `button`
  - Force Refresh â€“ natychmiastowy restart sesji renderera.
  - Reboot Device â€“ restart urzÄ…dzenia.
  - Clear Web Cache â€“ czyszczenie cache przeglÄ…darki.
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="658" height="1002" alt="Zrzut ekranu" src="https://github.com/user-attachments/assets/67de6efe-ffd5-4757-8a82-71e46f039943" />
</details>



---

## UsÅ‚ugi

PoniÅ¼ej peÅ‚na lista usÅ‚ug dostÄ™pnych w integracji (wiele z nich moÅ¼esz poÅ‚Ä…czyÄ‡ z warstwÄ… interaktywnÄ…: przyciski, webhooki, klikâ€‘anywhere):

### WyÅ›wietlanie treÅ›ci

- `visionect_joan.send_button_panel`
  - UmoÅ¼liwia stworzenie siatki do 12 konfigurowalnych przyciskÃ³w. KaÅ¼dy przycisk moÅ¼e mieÄ‡ wÅ‚asnÄ… nazwÄ™, ikonÄ™ i przypisany unikalny webhook_id, ktÃ³ry wywoÅ‚uje automatyzacje w Home Assistant.
  - WskazÃ³wka: Panel wysyÅ‚a sygnaÅ‚y do Home Assistant za pomocÄ… webhookÃ³w. Aby przycisk dziaÅ‚aÅ‚, musisz stworzyÄ‡ automatyzacjÄ™, ktÃ³ra na ten sygnaÅ‚ zareaguje.
  - âš ï¸ WaÅ¼ne ograniczenie: Brak informacji o stanie
Panel przyciskÃ³w dziaÅ‚a jednokierunkowo. Oznacza to, Å¼e przyciski nie pokazujÄ… aktualnego stanu urzÄ…dzeÅ„ (np. czy Å›wiatÅ‚o jest wÅ‚Ä…czone). NaciÅ›niÄ™cie przycisku wysyÅ‚a polecenie do Home Assistant, ale wyglÄ…d ikony na tablecie nie jest dynamicznie aktualizowany. (informacji o stanie przycisku i inne polecam uÅ¼yÄ‡ dashboard AppDaemon)

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1214" height="3814" alt="calastrona" src="https://github.com/user-attachments/assets/fdbb51ba-0f4b-4db4-98bd-e5d01b34ce77" />
</details>

***

- `visionect_joan.set_url`
  - Ustawia dowolny URL lub nazwÄ™ zdefiniowanego widoku (predefined).
  - WskazÃ³wka: nazwy widokÃ³w dopasowywane sÄ… bez rozrÃ³Å¼niania wielkoÅ›ci liter. Dodawaj/edytuj widoki w: Ustawienia â†’ UrzÄ…dzenia i usÅ‚ugi â†’ Visionect Joan â†’ Konfiguruj.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1220" height="595" alt="image" src="https://github.com/user-attachments/assets/bfdf8101-1b45-45e0-ab1a-46c7ab79d96b" />
</details>

***

- `visionect_joan.send_text`
  - WysyÅ‚a sformatowany tekst (obsÅ‚uguje Jinja2), opcjonalnie z obrazem i rÃ³Å¼nymi ukÅ‚adami (text only, text + image).
  - WskazÃ³wki: uÅ¼ywaj czcionek o dobrej czytelnoÅ›ci na eâ€‘ink; dla obrazÃ³w steruj `image_zoom` i `image_rotation`.
 
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1225" height="2066" alt="image" src="https://github.com/user-attachments/assets/9912da53-becf-4932-ab7e-7f0a17a681d7" />

</details>

***

- `visionect_joan.send_image_url` âŠ
  - WyÅ›wietla obraz z podanego URL (obsÅ‚uga m.in. PNG/JPG/SVG/WebP).
  - WskazÃ³wki: dla obrazÃ³w lokalnych uÅ¼yj `http://<HA_IP>:8123/local/...`;
 
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1234" height="1448" alt="image" src="https://github.com/user-attachments/assets/9da6769f-668a-4adb-9edf-b5fdc5851d55" />


</details>

***

- `visionect_joan.send_camera_snapshot`
  - Tworzy snapshot z encji `camera` i wyÅ›wietla go na ekranie (z podpisem i rotacjÄ… obrazu).
 
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1223" height="1472" alt="image" src="https://github.com/user-attachments/assets/6cec8748-a586-46c2-8f2b-2bcf25237e08" />

</details>

***

- `visionect_joan.send_status_panel`
  - Panel statusÃ³w dowolnych encji: ikony + nazwy + wartoÅ›ci (z tÅ‚umaczeniem stanÃ³w on/off/open/â€¦).
 
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1230" height="1416" alt="image" src="https://github.com/user-attachments/assets/bb21ddb7-77bf-4db1-bc57-9ecf2c2d5021" />

</details>

***

- `visionect_joan.send_energy_panel`
  - DuÅ¼y panel energii (bieÅ¼Ä…cy pobÃ³r + karty: produkcja/import/eksport/zuÅ¼ycie dzienne). Dobrze wyglÄ…da na pionowym ukÅ‚adzie.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1230" height="1423" alt="image" src="https://github.com/user-attachments/assets/66b3f26d-f5c3-4276-b837-de6b85cf9fcf" />

</details>

***

- `visionect_joan.send_weather`
  - 3 layouty: szczegÃ³Å‚owe podsumowanie, lista prognozy dziennej, panel z wykresem 24 h (automatyczne ikony dzieÅ„/noc).

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1225" height="1237" alt="image" src="https://github.com/user-attachments/assets/588660d8-e0ff-48b3-b7a5-6d9432cd2329" />

</details>

***

- `visionect_joan.send_calendar`
  - Lista wydarzeÅ„ (1â€“31 dni) lub siatka miesiÄ™czna z podglÄ…dem dnia.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1207" height="801" alt="510071400-b6431600-0556-4052-abdf-53eacf79397e" src="https://github.com/user-attachments/assets/83f5d345-69ef-42af-84d3-f7f4f3c3b1a0" />

</details>

***

- `visionect_joan.send_todo_list`
  - Lista zadaÅ„ (w tym Shopping List). Pozycje sÄ… duÅ¼e i czytelne; wspiera interaktywne odhaczanie przez webhook (patrz niÅ¼ej).

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1216" height="1201" alt="image" src="https://github.com/user-attachments/assets/6735340b-bec9-47a6-a72e-07d16da20943" />

</details>

***

- `visionect_joan.send_sensor_graph`
  - Wykres historii wskazanych sensorÃ³w (line lub bar), automatycznie dopasowany do orientacji ekranu.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1219" height="1895" alt="image" src="https://github.com/user-attachments/assets/c5507b3b-28e6-47a1-a88a-11d936f2f35b" />

</details>

***

- `visionect_joan.send_rss_feed` â‹
  - Pobiera i pokazuje najnowsze wpisy z kanaÅ‚u RSS/Atom (stronicowanie, nagÅ‚Ã³wek, ikony). Podaj `feed_url`, `max_items`, opcjonalnie wÅ‚asny tytuÅ‚.

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1225" height="1255" alt="image" src="https://github.com/user-attachments/assets/56316ce1-8350-49d5-a624-2f7a880b8a4e" />

</details>

***
### InteraktywnoÅ›Ä‡ i nawigacja

- `visionect_joan.send_qr_code`
  - Generuje kod QR (np. goÅ›cinne Wiâ€‘Fi) z opcjonalnym podpisem (pozycja nad/po QR).
    
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1223" height="1765" alt="image" src="https://github.com/user-attachments/assets/a55360c9-9f17-4b81-baf9-b990692bc2a0" />

</details>

***

- `visionect_joan.start_slideshow` 
  - Odtwarza listÄ™ widokÃ³w (predefiniowane nazwy lub peÅ‚ne lokalne adresy URL) w pÄ™tli z czasem wyÅ›wietlania perâ€‘slide.
WskazÃ³wka: Im wiÄ™cej sekund na przeÅ‚Ä…czenie slajdu tym wydÅ‚ozy siÄ™ zuÅ¼ycie baterii. WyÅ›wietla listÄ™ widokÃ³w (predefiniowane nazwy lub peÅ‚ne adresy URL) w pÄ™tli z okreÅ›lonym czasem na slajd. WaÅ¼ne: Ten pokaz slajdÃ³w renderuje strony wewnÄ…trz ramki iframe. Wiele zewnÄ™trznych witryn internetowych (np. google.com, home-assistant.io) blokuje osadzanie za pomocÄ… X-Frame-Options/Content-Security-Policy i NIE wyÅ›wietla siÄ™. Aby uzyskaÄ‡ wiarygodne wyniki, uÅ¼ywaj wyÅ‚Ä…cznie adresÃ³w lokalnych (Asystent domowy/AppDaemon/pliki lokalne) lub ustawionych widokÃ³w skonfigurowanych w integracji Visionect Joan.
 
<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="606" height="729" alt="510095682-106d5ae9-8d8a-4b3f-8f5e-206aab76e0c8" src="https://github.com/user-attachments/assets/91d25761-2709-417b-9a2c-edf2104c5869" />

</details>

***

- `visionect_joan.send_keypad` â
  - PeÅ‚noekranowa klawiatura numeryczna. Wpisany PIN wysyÅ‚any jest POSTâ€‘em do wskazanego webhooka w HA (`trigger.json.pin`).
  - WskazÃ³wka: potrzebna automatyzacja do rozpoznania pinu
  - 
 <details>
  
  <summary><strong>PrzykÅ‚ad: Automatyzacja PIN (webhook + keypad) dla Visionect Joan</strong></summary>

Ten przykÅ‚ad pokazuje, jak uÅ¼yÄ‡ usÅ‚ugi `visionect_joan.send_keypad` do wprowadzania PIN-u na ekranie Joan i sprawdzania go w automatyzacji z wyzwalaczem webhook. JeÅ›li PIN jest poprawny â€” urzÄ…dzenie przechodzi do wskazanego widoku; jeÅ›li bÅ‚Ä™dny â€” pojawia siÄ™ komunikat i klawiatura wraca po chwili.

â€” Wymagania:
- Zainstalowana integracja Visionect Joan oraz dodane urzÄ…dzenie (Joan 6).
- Znany `device_id` Twojego tabletu (Ustawienia â†’ UrzÄ…dzenia i usÅ‚ugi â†’ urzÄ…dzenie â†’ trzy kropki â†’ Kopiuj identyfikator urzÄ…dzenia).
- Zdefiniowany widok w opcjach integracji (albo peÅ‚ny URL, jeÅ›li wolisz).

â€” Jak uruchomiÄ‡ keypad po raz pierwszy:
- Jednorazowo wywoÅ‚aj usÅ‚ugÄ™: `visionect_joan.send_keypad` z:
  - device_id: TwÃ³j tablet
  - title: np. â€œWprowadÅº PINâ€
  - action_webhook_id: np. â€œjoan_pinâ€ (musi siÄ™ zgadzaÄ‡ z webhookiem w automatyzacji)

â€” YAML automatyzacji (skopiuj do edytora YAML automatyzacji w HA i podmieÅ„ wartoÅ›ci w komentarzach):

```
alias: Automatyzacja kodu PIN dla urzÄ…dzenia Visionect Joan
mode: single

trigger:
  - platform: webhook
    # USTAW SWÃ“J WEBHOOK ID (musi byÄ‡ taki sam jak w visionect_joan.send_keypad â†’ action_webhook_id):
    webhook_id: joan_pin

action:
  - choose:
      # Warunek: poprawny PIN?
      - conditions:
          - condition: template
            # USTAW SWÃ“J PIN:
            value_template: "{{ trigger.json.pin == '321' }}"
        sequence:
          # SUKCES: przejdÅº do widoku (nazwa predefiniowanego widoku lub peÅ‚ny URL)
          - action: visionect_joan.set_url
            target:
              # USTAW SWOJE DEVICE_ID:
              device_id: 266a72218733bb9a056aff49bf6f8e2d
            data:
              # ZmieÅ„ na nazwÄ™ widoku (np. KuchniaGÃ³ra) lub wpisz peÅ‚ny URL
              url: KuchniaGÃ³ra
    default:
      # BÅÄ˜DNY PIN: pokaÅ¼ komunikat
      - action: visionect_joan.send_text
        target:
          device_id: 266a72218733bb9a056aff49bf6f8e2d
        data:
          message: "BÅ‚Ä™dny Kod!"
          text_size: 48
          # (opcjonalnie) moÅ¼esz dodaÄ‡ nakÅ‚adkÄ™ z przyciskiem Wstecz/akcjÄ…:
          # add_back_button: true
          # back_button_url: "NazwaWidokuLubURL"
      # krÃ³tka pauza
      - delay: "00:00:03"
      # PokaÅ¼ keypad ponownie (ten sam webhook_id co w triggerze)
      - action: visionect_joan.send_keypad
        target:
          device_id: 266a72218733bb9a056aff49bf6f8e2d
        data:
          title: "SprÃ³buj ponownie"
          action_webhook_id: joan_pin
```

â€” WskazÃ³wki i bezpieczeÅ„stwo:
- Webhook nie wymaga tokenu â€” najlepiej uÅ¼ywaÄ‡ w sieci lokalnej lub za reverse proxy/ACL.
- PIN moÅ¼esz przechowywaÄ‡ w helperze (`input_text`) lub jako sekret i porÃ³wnywaÄ‡ w szablonie.
- Zamiast nazwy widoku w `data.url` moÅ¼esz wpisaÄ‡ peÅ‚ny URL (np. panel AppDaemon).

</details>
 

<details>
  <summary>PokaÅ¼ zrzut ekranu</summary>

  <img width="1220" height="632" alt="image" src="https://github.com/user-attachments/assets/5df2b9d9-ae6e-4a60-9f9f-c787f7658135" />

</details>

***

### Parametry renderingu i zarzÄ…dzanie

- `visionect_joan.set_session_options` â
  - Ustawia parametry sesji: `encoding` (gÅ‚Ä™bia bitowa, zwykle â€1â€ lub â€4â€) oraz `dithering` (none/bayer/floydâ€‘steinberg).
  - WskazÃ³wka: 1â€‘bit = najwyÅ¼szy kontrast i szybkoÅ›Ä‡, 4â€‘bit = 16 odcieni szaroÅ›ci (lepsza jakoÅ›Ä‡ grafiki).

- `visionect_joan.clear_web_cache`
  - CzyÅ›ci cache przeglÄ…darki webkit dla wybranych urzÄ…dzeÅ„; opcjonalnie `restart_session: true`.
  - WskazÃ³wka: uÅ¼yteczne przy problemach ze â€starymiâ€ obrazami lub stylami.

- `visionect_joan.force_refresh`
  - Natychmiast restartuje sesjÄ™ (odÅ›wieÅ¼a aktualny widok).

- `visionect_joan.set_display_rotation`
  - Trwale zmienia orientacjÄ™ ekranu urzÄ…dzenia (wymaga krÃ³tkiego restartu urzÄ…dzenia).

- `visionect_joan.clear_display`
  - CzyÅ›ci ekran do pustego tÅ‚a (biaÅ‚e tÅ‚o).

- `visionect_joan.sleep_device` / `visionect_joan.wake_device`
  - Usypianie/wybudzanie urzÄ…dzenia (oszczÄ™dzanie baterii; ustaw czas snu w sekundach).

âŠ `send_image_url` â€“ akceptowane rozszerzenia: png, jpg, jpeg, gif, svg, webp (wsparcie formatÃ³w zaleÅ¼y teÅ¼ od wersji renderera Visionect).

â‹ `send_rss_feed` â€“ integracja parsuje kanaÅ‚ (Feedparser), buduje listy i paginacjÄ™; Å›wietne na szybkie â€newsboardyâ€.

âŒ `start_slideshow` â€“ przyjmie nazwy widokÃ³w (z sekcji â€Widoki i opcjeâ€) i/lub peÅ‚ne URL (po jednym w linii).

â `send_keypad` â€“ webhook w HA powinien mieÄ‡ trigger typu Webhook; w warunkach: `{{ trigger.json.pin == '1234' }}`.

â `set_session_options` â€“ jeÅ›li zostawisz parametr pusty, bieÅ¼Ä…ca wartoÅ›Ä‡ nie zostanie zmieniona.

---

## Warstwa interaktywna (przyciski, klikâ€‘anywhere, webhooki)

KaÅ¼da z usÅ‚ug wyÅ›wietlajÄ…cych treÅ›ci moÅ¼e dodaÄ‡ â€nakÅ‚adkÄ™â€ z przyciskami:
- â€Wsteczâ€ (â†) â€“ powrÃ³t do adresu zdefiniowanego jako:
  1) `back_button_url` w wywoÅ‚aniu usÅ‚ugi,
  2) encja `Back button target` (per urzÄ…dzenie),
  3) globalny â€Main menu URLâ€ ustawiony w opcjach integracji.
- â€Akcjaâ€ (â†’) â€“ wywoÅ‚uje webhook `action_webhook_id`.
- â€Åšrodkowyâ€ (âœ”) â€“ wywoÅ‚uje webhook `action_webhook_2_id`.
- â€Klik anywhereâ€ â€“ moÅ¼e wywoÅ‚aÄ‡ akcjÄ™ (webhook) albo sÅ‚uÅ¼yÄ‡ jako szybki â€powrÃ³tâ€.

<details>
 
  <summary><strong>PrzykÅ‚ad: przycisk akcji (webhook) â†’ wÅ‚Ä…cz lampÄ™</strong></summary>

Ten przykÅ‚ad pokazuje, jak uÅ¼yÄ‡ `action_webhook_id` w widoku wysyÅ‚anym na Joan, aby po naciÅ›niÄ™ciu prawego przycisku (â†’) wÅ‚Ä…czyÄ‡ lampÄ™ w Home Assistant.

DziaÅ‚a z wiÄ™kszoÅ›ciÄ… usÅ‚ug wyÅ›wietlajÄ…cych treÅ›ci (send_text, send_status_panel, send_weather, send_image_url, send_todo_list, send_calendar, send_energy_panel, send_sensor_graph, start_slideshow). PoniÅ¼ej uÅ¼ywamy `send_text`.

â€” Krok 1. Automatyzacja: nasÅ‚uch webhooka i wÅ‚Ä…cz lampÄ™

Skopiuj do edytora YAML automatyzacji (zmieÅ„ WEBHOOK_ID oraz encjÄ™ lampy):

```
alias: "Joan: wÅ‚Ä…cz lampÄ™ przyciskiem"
mode: single

trigger:
  - platform: webhook
    # USTAW SWÃ“J WEBHOOK ID (musi zgadzaÄ‡ siÄ™ z action_webhook_id w kroku 2):
    webhook_id: joan_light_on

action:
  - service: light.turn_on
    target:
      entity_id: light.twoja_lampa  # np. light.kuchnia_lampa
    data:
      brightness_pct: 100  # opcjonalnie
```

â€” Krok 2. WyÅ›lij na Joan widok z przyciskiem akcji (â†’)

WywoÅ‚aj usÅ‚ugÄ™ `visionect_joan.send_text` (NarzÄ™dzia deweloperskie â†’ UsÅ‚ugi) z `action_webhook_id: joan_light_on`. To doda dolny pasek z przyciskami; prawy (â†’) wyÅ›le webhook do HA.

```
service: visionect_joan.send_text
data:
  message: "WÅ‚Ä…cz lampÄ™"
  add_back_button: true                # opcjonalnie pokaÅ¼ 'Wstecz' (â†)
  back_button_url: "Main"              # nazwa zdefiniowanego widoku lub peÅ‚ny URL (opcjonalnie)
  action_webhook_id: joan_light_on     # MUSI zgadzaÄ‡ siÄ™ z 'webhook_id' w automatyzacji
target:
  device_id: 00000000000000000000000000000000  # <- wstaw swÃ³j device_id Joana
```

Wariant: caÅ‚y ekran jako przycisk
- JeÅ›li zamiast widocznych przyciskÃ³w na dole wolisz, aby klikniÄ™cie w dowolne miejsce ekranu wÅ‚Ä…czyÅ‚o lampÄ™, uÅ¼yj:

```yaml
service: visionect_joan.send_text
data:
  message: "Dotknij, aby wÅ‚Ä…czyÄ‡ lampÄ™"
  click_anywhere_to_action: true       # ukryje pasek przyciskÃ³w i uczyni caÅ‚y ekran 'kliknij aby wykonaÄ‡ akcjÄ™'
  action_webhook_id: joan_light_on
target:
  device_id: 00000000000000000000000000000000
```

WskazÃ³wki:
- Prawy przycisk (â†’) korzysta z `action_webhook_id`. Åšrodkowy (âœ”) to `action_webhook_2_id`.
- â€Wsteczâ€ (â†) moÅ¼esz dodaÄ‡ parametrem `add_back_button: true`. Cel â€Wsteczâ€:
  1) `back_button_url` z wywoÅ‚ania usÅ‚ugi,
  2) encja â€Back button targetâ€ dla urzÄ…dzenia,
  3) globalny â€Main menu URLâ€ z opcji integracji.
- Najpewniejsze dziaÅ‚anie webhookÃ³w jest, gdy Visionect Server dziaÅ‚a jako dodatek w HA (integracja uÅ¼yje prawidÅ‚owego adresu wewnÄ™trznego). JeÅ›li Visionect dziaÅ‚a na innym hoÅ›cie, upewnij siÄ™, Å¼e ma dostÄ™p HTTP/HTTPS do HA.
- Ten sam schemat zadziaÅ‚a takÅ¼e z innymi usÅ‚ugami wyÅ›wietlania (np. `send_status_panel`, `send_image_url`) â€” wystarczy dodaÄ‡ `action_webhook_id`.

Troubleshooting:
- NaciÅ›niÄ™cie przycisku nic nie robi? SprawdÅº w PodglÄ…dzie zdarzeÅ„, czy webhook dochodzi i czy `trigger.json` jest widoczne w automatyzacji.
- JeÅ›li masz certyfikat HTTPS i osobne hosty, zweryfikuj poprawnoÅ›Ä‡ adresu wewnÄ™trznego HA w Ustawienia â†’ System â†’ SieÄ‡.
  
</details>


WskazÃ³wki:
- Najpewniejsze dziaÅ‚anie webhookÃ³w uzyskasz, gdy Visionect Server dziaÅ‚a jako dodatek HA (ten sam host) â€“ integracja automatycznie uÅ¼yje prawidÅ‚owego adresu wewnÄ™trznego HA dla webhookÃ³w.
- JeÅ›li Visionect stoi na innym hoÅ›cie, zadbaj o Å‚Ä…cznoÅ›Ä‡ HTTP do HA oraz certyfikat (jeÅ›li https).

---

## Instalacja

### Przez HACS (zalecane)
1. Zainstaluj [HACS](https://hacs.xyz/) w Home Assistant.
2. HACS â†’ Integrations â†’ menu (â‹®) â†’ Custom repositories.
3. Dodaj to repo jako Integration i kliknij Add.
4. ZnajdÅº â€Visionect Joanâ€ i kliknij Install.
5. Zrestartuj Home Assistant.

### RÄ™cznie
1. Pobierz najnowsze wydanie (`visionect-joan.zip` lub `Source code (zip)`).
2. Wypakuj do `/config/custom_components/visionect_joan/`.
3. Zrestartuj Home Assistant.

---

## Konfiguracja


1. PrzejdÅº do `Ustawienia â†’ UrzÄ…dzenia i usÅ‚ugi`.
2. Kliknij **â€+ Dodaj integracjÄ™â€**.
3. Wyszukaj **â€Visionect Joanâ€** i rozpocznij konfiguracjÄ™.
4. WprowadÅº dane do Visionect Software Suite: [Instalacja Visionect Software Suite](https://github.com/Adam7411/Joan-6-Visionect_Home-Assistant_EN)
   - Adres serwera (np. `192.168.x.x:8081`)(adres Home Assistant)
   - Nazwa uÅ¼ytkownika (`admin`)
   - HasÅ‚o (`naleÅ¼y ustawiÄ‡ swoje`)
   - API Key oraz API Secret (dodasz w Visionect Software Suite â†’ Users â†’ Add new API key)

<img width="1567" height="425" alt="a" src="https://github.com/user-attachments/assets/37bbcdb7-e820-4275-b7ed-efc9248048e5" />

<img width="575" height="615" alt="2" src="https://github.com/user-attachments/assets/a70ccc87-bbff-4fa4-aec5-f4e602709f19" />


---

## PrzykÅ‚ady uÅ¼ycia

Ekrany, ktÃ³re moÅ¼esz wyÅ›wietliÄ‡ na tablecie Joan 6:


<details>
  <summary>Kliknij, aby zobaczyÄ‡ wiÄ™cej zrzutÃ³w ekranu</summary>
  <img width="381" height="570" alt="Widok 1" src="https://github.com/user-attachments/assets/e1f32a48-0277-42ce-9018-837aeba1b6a8" />
  <img width="510" height="739" alt="Widok 2" src="https://github.com/user-attachments/assets/8f8c673d-8447-42ec-9d13-0bd4e9683437" />
  <img width="948" height="791" alt="Widok 3" src="https://github.com/user-attachments/assets/4a3c054a-e239-49c1-ab9d-037584cd7989" />
  <img width="607" height="893" alt="Widok 4" src="https://github.com/user-attachments/assets/1321cfe8-905d-44ef-b1b9-29d999559a04" />
  <img width="770" height="641" alt="Widok 5" src="https://github.com/user-attachments/assets/31e9bca1-d7c6-4245-b32f-4c909251bf2c" />
  <img width="290" height="407" alt="Widok 6" src="https://github.com/user-attachments/assets/ad0d3f54-fe5a-466a-8da6-a5d93a052944" />
  <img width="433" height="290" alt="Widok 7" src="https://github.com/user-attachments/assets/871617fa-b4cb-4d4e-af4b-eae5120b684a" />
  <img width="307" height="457" alt="Widok 8" src="https://github.com/user-attachments/assets/d7d76fdd-52b7-4c95-8f77-a369e672ab4b" />
  <img width="306" height="456" alt="Widok 9" src="https://github.com/user-attachments/assets/e3f248bb-f2c8-4e32-b41d-09cbf24a02bf" />
  <img width="569" height="808" alt="Widok 10" src="https://github.com/user-attachments/assets/f746301e-d0fa-4993-aa7f-b7b4d5c2e15d" />
  <img width="758" height="1024" alt="joan" src="https://github.com/user-attachments/assets/fd78c164-6691-477e-84e1-e47a1f70a8cc" />
  
</details>

---


## Uwagi

- Projekt nie jest oficjalnÄ… integracjÄ… Visionect ani Home Assistant.
- Testowany na **Joan 6**; inne modele nie byÅ‚y weryfikowane.
- Do szybszego rozwoju uÅ¼yto AI.
- [Chcesz kupiÄ‡ nowy Joan 6?](https://allegrolokalnie.pl/oferta/joan-6-nowy-home-assistant-energooszczedny-dotykowy-tablet-eink)
- [Opis: Visionect Software Suite - Instalacja](https://github.com/Adam7411/Joan-6-Visionect_Home-Assistant)

---

## Licencja

MIT
